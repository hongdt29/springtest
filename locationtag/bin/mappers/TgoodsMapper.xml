<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="summer.db.client.TgoodsMapper">
  <resultMap id="BaseResultMap" type="summer.db.entity.Tgoods">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Aug 12 18:06:44 JST 2017.
    -->
    <id column="id" jdbcType="VARCHAR" property="id" />
    <result column="name" jdbcType="VARCHAR" property="name" />
    <result column="remark" jdbcType="VARCHAR" property="remark" />
    <result column="idfloor" jdbcType="VARCHAR" property="idfloor" />
    <result column="idtag" jdbcType="VARCHAR" property="idtag" />
    <result column="idcompany" jdbcType="VARCHAR" property="idcompany" />
    <result column="idcategory" jdbcType="VARCHAR" property="idcategory" />
    <result column="deleteFlag" jdbcType="BIT" property="deleteflag" />
  </resultMap>
  <sql id="Example_Where_Clause">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Aug 12 18:06:44 JST 2017.
    -->
    <where>
      <foreach collection="oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Aug 12 18:06:44 JST 2017.
    -->
    <where>
      <foreach collection="example.oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Aug 12 18:06:44 JST 2017.
    -->
    id, name, remark, idfloor, idtag, idcompany, idcategory, deleteFlag
  </sql>
  <select id="selectByExample" parameterType="summer.db.entity.TgoodsExample" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Aug 12 18:06:44 JST 2017.
    -->
    select
    <if test="distinct">
      distinct
    </if>
    <include refid="Base_Column_List" />
    from tgoods
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null">
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Aug 12 18:06:44 JST 2017.
    -->
    select 
    <include refid="Base_Column_List" />
    from tgoods
    where id = #{id,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Aug 12 18:06:44 JST 2017.
    -->
    delete from tgoods
    where id = #{id,jdbcType=VARCHAR}
  </delete>
  <delete id="deleteByExample" parameterType="summer.db.entity.TgoodsExample">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Aug 12 18:06:44 JST 2017.
    -->
    delete from tgoods
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="summer.db.entity.Tgoods">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Aug 12 18:06:44 JST 2017.
    -->
    insert into tgoods (id, name, remark, 
      idfloor, idtag, idcompany, 
      idcategory, deleteFlag)
    values (#{id,jdbcType=VARCHAR}, #{name,jdbcType=VARCHAR}, #{remark,jdbcType=VARCHAR}, 
      #{idfloor,jdbcType=VARCHAR}, #{idtag,jdbcType=VARCHAR}, #{idcompany,jdbcType=VARCHAR}, 
      #{idcategory,jdbcType=VARCHAR}, #{deleteflag,jdbcType=BIT})
  </insert>
  <insert id="insertSelective" parameterType="summer.db.entity.Tgoods">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Aug 12 18:06:44 JST 2017.
    -->
    insert into tgoods
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        id,
      </if>
      <if test="name != null">
        name,
      </if>
      <if test="remark != null">
        remark,
      </if>
      <if test="idfloor != null">
        idfloor,
      </if>
      <if test="idtag != null">
        idtag,
      </if>
      <if test="idcompany != null">
        idcompany,
      </if>
      <if test="idcategory != null">
        idcategory,
      </if>
      <if test="deleteflag != null">
        deleteFlag,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=VARCHAR},
      </if>
      <if test="name != null">
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="remark != null">
        #{remark,jdbcType=VARCHAR},
      </if>
      <if test="idfloor != null">
        #{idfloor,jdbcType=VARCHAR},
      </if>
      <if test="idtag != null">
        #{idtag,jdbcType=VARCHAR},
      </if>
      <if test="idcompany != null">
        #{idcompany,jdbcType=VARCHAR},
      </if>
      <if test="idcategory != null">
        #{idcategory,jdbcType=VARCHAR},
      </if>
      <if test="deleteflag != null">
        #{deleteflag,jdbcType=BIT},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="summer.db.entity.TgoodsExample" resultType="java.lang.Long">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Aug 12 18:06:44 JST 2017.
    -->
    select count(*) from tgoods
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Aug 12 18:06:44 JST 2017.
    -->
    update tgoods
    <set>
      <if test="record.id != null">
        id = #{record.id,jdbcType=VARCHAR},
      </if>
      <if test="record.name != null">
        name = #{record.name,jdbcType=VARCHAR},
      </if>
      <if test="record.remark != null">
        remark = #{record.remark,jdbcType=VARCHAR},
      </if>
      <if test="record.idfloor != null">
        idfloor = #{record.idfloor,jdbcType=VARCHAR},
      </if>
      <if test="record.idtag != null">
        idtag = #{record.idtag,jdbcType=VARCHAR},
      </if>
      <if test="record.idcompany != null">
        idcompany = #{record.idcompany,jdbcType=VARCHAR},
      </if>
      <if test="record.idcategory != null">
        idcategory = #{record.idcategory,jdbcType=VARCHAR},
      </if>
      <if test="record.deleteflag != null">
        deleteFlag = #{record.deleteflag,jdbcType=BIT},
      </if>
    </set>
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Aug 12 18:06:44 JST 2017.
    -->
    update tgoods
    set id = #{record.id,jdbcType=VARCHAR},
      name = #{record.name,jdbcType=VARCHAR},
      remark = #{record.remark,jdbcType=VARCHAR},
      idfloor = #{record.idfloor,jdbcType=VARCHAR},
      idtag = #{record.idtag,jdbcType=VARCHAR},
      idcompany = #{record.idcompany,jdbcType=VARCHAR},
      idcategory = #{record.idcategory,jdbcType=VARCHAR},
      deleteFlag = #{record.deleteflag,jdbcType=BIT}
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="summer.db.entity.Tgoods">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Aug 12 18:06:44 JST 2017.
    -->
    update tgoods
    <set>
      <if test="name != null">
        name = #{name,jdbcType=VARCHAR},
      </if>
      <if test="remark != null">
        remark = #{remark,jdbcType=VARCHAR},
      </if>
      <if test="idfloor != null">
        idfloor = #{idfloor,jdbcType=VARCHAR},
      </if>
      <if test="idtag != null">
        idtag = #{idtag,jdbcType=VARCHAR},
      </if>
      <if test="idcompany != null">
        idcompany = #{idcompany,jdbcType=VARCHAR},
      </if>
      <if test="idcategory != null">
        idcategory = #{idcategory,jdbcType=VARCHAR},
      </if>
      <if test="deleteflag != null">
        deleteFlag = #{deleteflag,jdbcType=BIT},
      </if>
    </set>
    where id = #{id,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="summer.db.entity.Tgoods">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Aug 12 18:06:44 JST 2017.
    -->
    update tgoods
    set name = #{name,jdbcType=VARCHAR},
      remark = #{remark,jdbcType=VARCHAR},
      idfloor = #{idfloor,jdbcType=VARCHAR},
      idtag = #{idtag,jdbcType=VARCHAR},
      idcompany = #{idcompany,jdbcType=VARCHAR},
      idcategory = #{idcategory,jdbcType=VARCHAR},
      deleteFlag = #{deleteflag,jdbcType=BIT}
    where id = #{id,jdbcType=VARCHAR}
  </update>
  
  
  <resultMap id="resultCompositeTGoods" type="summer.db.entity.CompositeTGoods">
    <id column="id" jdbcType="VARCHAR" property="id" />
    <result column="name" jdbcType="VARCHAR" property="name" />
    <result column="remark" jdbcType="VARCHAR" property="remark" />
    <result column="idfloor" jdbcType="VARCHAR" property="idfloor" />
    <result column="idtag" jdbcType="VARCHAR" property="idtag" />
    <result column="idcompany" jdbcType="VARCHAR" property="idcompany" />
    <result column="idcategory" jdbcType="VARCHAR" property="idcategory" />
    
    <result column="floorname" jdbcType="VARCHAR" property="floorname" />
    <result column="categoryname" jdbcType="VARCHAR" property="categoryname" />
    <result column="companyname" jdbcType="VARCHAR" property="companyname" />
  </resultMap>
  
	<select id="getAllGoods" parameterType="summer.db.entity.CompositeTGoods" resultMap="resultCompositeTGoods">
	    select distinct tgoods.id as id, tgoods.name as name, tgoods.remark as remark, tgoods.idcategory as idcategory, 
	    	tgoods.idfloor as idfloor, tgoods.idtag as idtag, tgoods.idcompany as idcompany, 
	    	mfloor.name as floorname, mcategory.name as categoryname, 
	    	mcompany.name as companyname
	    FROM tgoods
		INNER JOIN mfloor
		ON tgoods.idfloor = mfloor.id	
		INNER JOIN mcategory
		ON tgoods.idcategory = mcategory.id
		INNER JOIN mcompany
		ON tgoods.idcompany = mcompany.id
		INNER JOIN mtag
		ON tgoods.idtag = mtag.id
	    
	    WHERE tgoods.id LIKE #{id,jdbcType=VARCHAR}
	    AND tgoods.name LIKE #{name,jdbcType=VARCHAR}
	    AND tgoods.remark LIKE #{remark,jdbcType=VARCHAR}
	    AND tgoods.idfloor LIKE #{idfloor,jdbcType=VARCHAR}
	    AND tgoods.idtag LIKE #{idtag,jdbcType=VARCHAR}
	    AND tgoods.idcompany LIKE #{idcompany,jdbcType=VARCHAR}
	    AND tgoods.idcategory LIKE #{idcategory,jdbcType=VARCHAR}
	    AND (tgoods.deleteFlag LIKE #{deleteFlag,jdbcType=BIT}
	    	OR tgoods.deleteFlag IS NULL)
	    AND mfloor.id LIKE #{idfloor,jdbcType=VARCHAR}
	    AND mcategory.id LIKE #{idcategory,jdbcType=VARCHAR}
		AND mcompany.id LIKE #{idcompany,jdbcType=VARCHAR}
		AND mtag.id LIKE #{idtag,jdbcType=VARCHAR}
	</select>
	
	
	<update id="updateDeleteFlagToTrueByID" parameterType="java.lang.String">
	    update tgoods
	    set
	      deleteFlag = #{true,jdbcType=BIT}
	    where id = #{id,jdbcType=VARCHAR}
	  </update>
</mapper>